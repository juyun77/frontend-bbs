{"ast":null,"code":"import axios from\"axios\";import{useContext,useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../context/AuthProvider\";import{HttpHeadersContext}from\"../context/HttpHeadersProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BbsWrite(){const{auth,setAuth}=useContext(AuthContext);const{headers,setHeaders}=useContext(HttpHeadersContext);const navigate=useNavigate();const[title,setTitle]=useState(\"\");const[content,setContent]=useState(\"\");const changeTitle=event=>{setTitle(event.target.value);};const changeContent=event=>{setContent(event.target.value);};/* [POST /bbs]: 게시글 작성 */const createBbs=async()=>{const req={id:localStorage.getItem(\"id\"),title:title,content:content};await axios.post(\"http://localhost:8080/bbs\",req,{headers:headers}).then(resp=>{console.log(\"[BbsWrite.js] createBbs() success :D\");console.log(resp.data);alert(\"새로운 게시글을 성공적으로 등록했습니다 :D\");navigate(\"/bbsdetail/\".concat(resp.data.seq));// 새롭게 등록한 글 상세로 이동\n}).catch(err=>{console.log(\"[BbsWrite.js] createBbs() error :<\");console.log(err);});};useEffect(()=>{if(!auth){alert(\"로그인 한 사용자만 게시글을 작성할 수 있습니다 !\");navigate(-1);}},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-primary\",children:\"\\uC791\\uC131\\uC790\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:localStorage.getItem(\"id\"),size:\"50px\",readOnly:true})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-primary\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:title,onChange:changeTitle,size:\"50px\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-primary\",children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:content,onChange:changeContent,rows:\"10\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-5 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary\",onClick:createBbs,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-pen\"}),\" \\uB4F1\\uB85D\\uD558\\uAE30\"]})})]});}export default BbsWrite;","map":{"version":3,"names":["axios","useContext","useEffect","useState","useNavigate","AuthContext","HttpHeadersContext","jsx","_jsx","jsxs","_jsxs","BbsWrite","auth","setAuth","headers","setHeaders","navigate","title","setTitle","content","setContent","changeTitle","event","target","value","changeContent","createBbs","req","id","localStorage","getItem","post","then","resp","console","log","data","alert","concat","seq","catch","err","children","className","type","size","readOnly","onChange","rows","onClick"],"sources":["C:/.git/frontend-bbs/src/Components/bbs/BbsWrite.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthProvider\";\r\nimport { HttpHeadersContext } from \"../context/HttpHeadersProvider\";\r\n\r\nfunction BbsWrite() {\r\n\r\n\tconst { auth, setAuth } = useContext(AuthContext)\r\n\tconst { headers, setHeaders } = useContext(HttpHeadersContext);\r\n\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst [title, setTitle] = useState(\"\");\r\n\tconst [content, setContent] = useState(\"\");\r\n\r\n\tconst changeTitle = (event) => {\r\n\t\tsetTitle(event.target.value);\r\n\t}\r\n\r\n\tconst changeContent = (event) => {\r\n\t\tsetContent(event.target.value);\r\n\t}\r\n\r\n\t/* [POST /bbs]: 게시글 작성 */\r\n\tconst createBbs = async() => {\r\n\r\n\t\tconst req = {\r\n\t\t\tid: localStorage.getItem(\"id\"), \r\n\t\t\ttitle: title, \r\n\t\t\tcontent: content\r\n\t\t}\r\n\r\n\t\tawait axios.post(\"http://localhost:8080/bbs\", req, {headers: headers})\r\n\t\t.then((resp) => {\r\n\t\t\tconsole.log(\"[BbsWrite.js] createBbs() success :D\");\r\n\t\t\tconsole.log(resp.data);\r\n\r\n\t\t\talert(\"새로운 게시글을 성공적으로 등록했습니다 :D\");\r\n\t\t\tnavigate(`/bbsdetail/${resp.data.seq}`); // 새롭게 등록한 글 상세로 이동\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(\"[BbsWrite.js] createBbs() error :<\");\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!auth) {\r\n\t\t\talert(\"로그인 한 사용자만 게시글을 작성할 수 있습니다 !\");\r\n\t\t\tnavigate(-1);\r\n\t\t}\r\n\t}, []);\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<table className=\"table\">\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th className=\"table-primary\">작성자</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control\"  value={localStorage.getItem(\"id\")} size=\"50px\" readOnly />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th className=\"table-primary\">제목</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control\" value={title} onChange={changeTitle} size=\"50px\" />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th className=\"table-primary\">내용</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<textarea className=\"form-control\" value={content} onChange={changeContent} rows=\"10\"></textarea>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\r\n\t\t\t<div className=\"my-5 d-flex justify-content-center\">\r\n\t\t\t\t<button className=\"btn btn-outline-secondary\" onClick={createBbs}><i className=\"fas fa-pen\"></i> 등록하기</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BbsWrite;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}