{"ast":null,"code":"import React,{useEffect,useState,useContext}from\"react\";import axios from\"axios\";import{useParams,useNavigate}from\"react-router-dom\";import{Link}from\"react-router-dom\";import CommentWrite from\"../comment/CommentWrite\";import CommentList from\"../comment/CommentList\";import{AuthContext}from\"../context/AuthProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function BbsDetail(){const{auth,setAuth}=useContext(AuthContext);const[bbs,setBbs]=useState({});const{seq}=useParams();// 파라미터 가져오기\nconst navigate=useNavigate();const getBbsDetail=async()=>{await axios.get(\"http://localhost:8080/bbs/\".concat(seq),{params:{readerId:auth?auth:\"\"}}).then(resp=>{console.log(\"[BbsDetail.js] getBbsDetail() success :D\");console.log(resp.data);setBbs(resp.data.bbs);}).catch(err=>{console.log(\"[BbsDetail.js] getBbsDetail() error :<\");console.log(err);});};const deleteBbs=async()=>{await axios.delete(\"http://localhost:8080/bbs/\".concat(seq)).then(resp=>{console.log(\"[BbsDetail.js] deleteBbs() success :D\");console.log(resp.data);if(resp.data.deletedRecordCount===1){alert(\"게시글을 성공적으로 삭제했습니다 :D\");navigate(\"/bbslist\");}}).catch(err=>{console.log(\"[BbsDetail.js] deleteBbs() error :<\");console.log(err);});};useEffect(()=>{getBbsDetail();},[]);const updateBbs={seq:bbs.seq,id:bbs.id,title:bbs.title,content:bbs.content};const parentBbs={id:bbs.id,title:bbs.title};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-3 d-flex justify-content-end\",children:[/*#__PURE__*/_jsxs(Link,{className:\"btn btn-outline-secondary\",to:{pathname:\"/bbsanswer/\".concat(bbs.seq)},state:{parentBbs:parentBbs},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-pen\"}),\" \\uB2F5\\uAE00\\uC4F0\\uAE30\"]}),\" \\xA0\",/* 자신이 작성한 게시글인 경우에만 수정 삭제 가능 */localStorage.getItem(\"id\")==bbs.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Link,{className:\"btn btn-outline-secondary\",to:\"/bbsupdate\",state:{bbs:updateBbs},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\" \\uC218\\uC815\"]}),\" \\xA0\",/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-danger\",onClick:deleteBbs,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"}),\" \\uC0AD\\uC81C\"]})]}):null]}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"col-3\",children:\"\\uC791\\uC131\\uC790\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:bbs.id})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:bbs.title})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uC791\\uC131\\uC77C\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:bbs.createdAt})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uC870\\uD68C\\uC218\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:bbs.readCount})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{children:bbs.content})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(Link,{className:\"btn btn-outline-secondary\",to:\"/bbslist\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-list\"}),\" \\uAE00\\uBAA9\\uB85D\"]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),auth?/*#__PURE__*/ // 로그인한 사용자만 댓글 작성 가능\n_jsx(CommentWrite,{seq:seq}):null,/*#__PURE__*/_jsx(CommentList,{seq:seq})]});}export default BbsDetail;","map":{"version":3,"names":["React","useEffect","useState","useContext","axios","useParams","useNavigate","Link","CommentWrite","CommentList","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BbsDetail","auth","setAuth","bbs","setBbs","seq","navigate","getBbsDetail","get","concat","params","readerId","then","resp","console","log","data","catch","err","deleteBbs","delete","deletedRecordCount","alert","updateBbs","id","title","content","parentBbs","children","className","to","pathname","state","localStorage","getItem","onClick","createdAt","readCount"],"sources":["C:/.git/frontend-bbs/src/Components/bbs/BbsDetail.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CommentWrite from \"../comment/CommentWrite\";\r\nimport CommentList from \"../comment/CommentList\";\r\nimport { AuthContext } from \"../context/AuthProvider\";\r\n\r\n\r\n\r\nfunction BbsDetail() {\r\n\r\n\tconst { auth, setAuth } = useContext(AuthContext)\r\n\r\n\tconst [bbs, setBbs] = useState({});\r\n\tconst { seq } = useParams(); // 파라미터 가져오기\r\n\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst getBbsDetail = async () => {\r\n\r\n\t\tawait axios.get(`http://localhost:8080/bbs/${seq}`, {params: {readerId: auth ? auth : \"\"}})\r\n\t\t.then((resp) => {\r\n\t\t\tconsole.log(\"[BbsDetail.js] getBbsDetail() success :D\");\r\n\t\t\tconsole.log(resp.data);\r\n\r\n\t\t\tsetBbs(resp.data.bbs);\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(\"[BbsDetail.js] getBbsDetail() error :<\");\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tconst deleteBbs = async () => {\r\n\r\n\t\tawait axios.delete(`http://localhost:8080/bbs/${seq}`)\r\n\t\t.then((resp) => {\r\n\t\t\tconsole.log(\"[BbsDetail.js] deleteBbs() success :D\");\r\n\t\t\tconsole.log(resp.data);\r\n\r\n\t\t\tif (resp.data.deletedRecordCount === 1) {\r\n\t\t\t\talert(\"게시글을 성공적으로 삭제했습니다 :D\");\r\n\t\t\t\tnavigate(\"/bbslist\");\r\n\t\t\t}\r\n\r\n\t\t}).catch((err) => {\r\n\t\t\tconsole.log(\"[BbsDetail.js] deleteBbs() error :<\");\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tgetBbsDetail();\r\n\t}, []);\r\n\r\n\tconst updateBbs = {\r\n\t\tseq: bbs.seq,\r\n\t\tid: bbs.id,\r\n\t\ttitle: bbs.title,\r\n\t\tcontent: bbs.content\r\n\t}\r\n\r\n\tconst parentBbs = {\r\n\t\tid: bbs.id,\r\n\t\ttitle: bbs.title\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\r\n\t\t\t<div className=\"my-3 d-flex justify-content-end\">\r\n\t\t\t\t<Link className=\"btn btn-outline-secondary\" to={{pathname: `/bbsanswer/${bbs.seq}` }} state={{ parentBbs: parentBbs }}><i className=\"fas fa-pen\"></i> 답글쓰기</Link> &nbsp;\r\n\r\n\t\t\t{\r\n\t\t\t\t/* 자신이 작성한 게시글인 경우에만 수정 삭제 가능 */\r\n\t\t\t\t(localStorage.getItem(\"id\") == bbs.id) ?\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Link className=\"btn btn-outline-secondary\"  to=\"/bbsupdate\" state={{ bbs: updateBbs }}><i className=\"fas fa-edit\"></i> 수정</Link> &nbsp;\r\n\t\t\t\t\t\t<button className=\"btn btn-outline-danger\"  onClick={deleteBbs}><i className=\"fas fa-trash-alt\"></i> 삭제</button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t:\r\n\t\t\t\tnull\r\n\t\t\t}\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<table className=\"table table-striped\">\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th className=\"col-3\">작성자</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<span>{bbs.id}</span>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>제목</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<span>{bbs.title}</span>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>작성일</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<span>{bbs.createdAt}</span>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>조회수</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<span>{bbs.readCount}</span>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>내용</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{bbs.content}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\r\n\t\t\t<div className=\"my-3 d-flex justify-content-center\">\r\n\t\t\t\t<Link className=\"btn btn-outline-secondary\" to=\"/bbslist\"><i className=\"fas fa-list\"></i> 글목록</Link>\r\n\t\t\t</div><br/><br/>\r\n\r\n\t\t\t{/* 댓글 작성 컴포넌트 */}\r\n\t\t\t{\r\n\t\t\t\t(auth) ? // 로그인한 사용자만 댓글 작성 가능\r\n\t\t\t\t\t<CommentWrite seq={seq}/>\r\n\t\t\t\t:\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\t{/* 댓글 리스트 컴포넌트 */}\r\n\t\t\t<CommentList  seq={seq}/>\r\n\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BbsDetail;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}