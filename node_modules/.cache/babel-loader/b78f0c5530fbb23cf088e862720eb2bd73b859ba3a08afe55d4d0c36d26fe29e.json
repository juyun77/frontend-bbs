{"ast":null,"code":"/* 로그인 컴포넌트 */import axios from\"axios\";import{useState,useContext}from\"react\";import{useNavigate}from\"react-router\";import{AuthContext}from\"../context/AuthProvider\";import{HttpHeadersContext}from\"../context/HttpHeadersProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const{auth,setAuth}=useContext(AuthContext);const{headers,setHeaders}=useContext(HttpHeadersContext);const navigate=useNavigate();const[id,setId]=useState(\"\");const[pwd,setPwd]=useState(\"\");const changeId=event=>{setId(event.target.value);};const changePwd=event=>{setPwd(event.target.value);};const login=async()=>{const req={id:id,pwd:pwd};await axios.post(\"http://api.juyun.link/user/login\",req).then(resp=>{console.log(\"[Login.js] login() success :D\");console.log(resp.data);alert(resp.data.id+\"님, 성공적으로 로그인 되었습니다\");// JWT 토큰 저장\nlocalStorage.setItem(\"bbs_access_token\",resp.data.jwt);localStorage.setItem(\"id\",resp.data.id);setAuth(resp.data.id);// 사용자 인증 정보(아이디 저장)\nsetHeaders({\"Authorization\":\"Bearer \".concat(resp.data.jwt)});// 헤더 Authorization 필드 저장\nnavigate(\"/bbslist\");}).catch(err=>{console.log(\"[Login.js] login() error :<\");console.log(err);alert(\"⚠️ \"+err.response.data);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"col-3\",children:\"\\uC544\\uC774\\uB514\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:id,onChange:changeId,size:\"50px\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:pwd,onChange:changePwd,size:\"50px\"})})]})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"my-1 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary\",onClick:login,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sign-in-alt\"}),\" \\uB85C\\uADF8\\uC778\"]})})]});}export default Login;","map":{"version":3,"names":["axios","useState","useContext","useNavigate","AuthContext","HttpHeadersContext","jsx","_jsx","jsxs","_jsxs","Login","auth","setAuth","headers","setHeaders","navigate","id","setId","pwd","setPwd","changeId","event","target","value","changePwd","login","req","post","then","resp","console","log","data","alert","localStorage","setItem","jwt","concat","catch","err","response","children","className","type","onChange","size","onClick"],"sources":["C:/.git/frontend-bbs/src/Components/member/Login.js"],"sourcesContent":["/* 로그인 컴포넌트 */\r\n\r\nimport axios from \"axios\";\r\nimport { useState, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { AuthContext } from \"../context/AuthProvider\";\r\nimport { HttpHeadersContext } from \"../context/HttpHeadersProvider\";\r\n\r\nfunction Login() {\r\n\r\n\tconst { auth, setAuth } = useContext(AuthContext);\r\n\tconst { headers, setHeaders } = useContext(HttpHeadersContext);\r\n\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst [id, setId] = useState(\"\");\r\n\tconst [pwd, setPwd] = useState(\"\");\r\n\r\n\tconst changeId = (event) => {\r\n\t\tsetId(event.target.value);\r\n\t}\r\n\r\n\tconst changePwd = (event) => {\r\n\t\tsetPwd(event.target.value);\r\n\t}\r\n\r\n\tconst login = async () => {\r\n\r\n\t\tconst req = {\r\n\t\t\tid: id,\r\n\t\t\tpwd: pwd\r\n\t\t}\r\n\r\n\t\tawait axios.post(\"http://api.juyun.link/user/login\", req)\r\n\t\t.then((resp) => {\r\n\t\t\tconsole.log(\"[Login.js] login() success :D\");\r\n\t\t\tconsole.log(resp.data);\r\n\r\n\t\t\t\talert(resp.data.id + \"님, 성공적으로 로그인 되었습니다\");\r\n\r\n\t\t\t\t// JWT 토큰 저장\r\n\t\t\t\tlocalStorage.setItem(\"bbs_access_token\", resp.data.jwt);\r\n\t\t\t\tlocalStorage.setItem(\"id\", resp.data.id);\r\n\r\n\t\t\t\tsetAuth(resp.data.id); // 사용자 인증 정보(아이디 저장)\r\n\t\t\t\tsetHeaders({\"Authorization\": `Bearer ${resp.data.jwt}`}); // 헤더 Authorization 필드 저장\r\n\r\n\t\t\t\tnavigate(\"/bbslist\");\r\n\t\t\t\r\n\r\n\t\t}).catch((err) => {\r\n\t\t\tconsole.log(\"[Login.js] login() error :<\");\r\n\t\t\tconsole.log(err);\r\n\r\n\t\t\talert(\"⚠️ \" + err.response.data);\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<table className=\"table\">\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th className=\"col-3\">아이디</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input type=\"text\" value={id} onChange={changeId} size=\"50px\" />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>비밀번호</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input type=\"password\" value={pwd} onChange={changePwd} size=\"50px\" />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table><br />\r\n\r\n\t\t\t<div className=\"my-1 d-flex justify-content-center\">\r\n\t\t\t\t<button className=\"btn btn-outline-secondary\" onClick={login}><i className=\"fas fa-sign-in-alt\"></i> 로그인</button>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}