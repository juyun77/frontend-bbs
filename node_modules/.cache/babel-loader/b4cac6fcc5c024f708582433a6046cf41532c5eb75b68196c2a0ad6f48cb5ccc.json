{"ast":null,"code":"import axios from\"axios\";import{useContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../context/AuthProvider\";import{HttpHeadersContext}from\"../context/HttpHeadersProvider\";/* 댓글 컴포넌트 */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Comment(props){const{auth,setAuth}=useContext(AuthContext);const{headers,setHeaders}=useContext(HttpHeadersContext);const comment=props.obj;const navigate=useNavigate();const[show,setShow]=useState(false);const[content,setContent]=useState(comment.content);const changeContent=event=>{setContent(event.target.value);};/* 댓글 수정 */const updateComment=async()=>{const req={content:content};await axios.patch(\"http://localhost:3000/comment/\".concat(comment.seq),req,{headers:headers}).then(resp=>{console.log(\"[Comment.js] updateComment() success :D\");console.log(resp.data);alert(\"댓글을 성공적으로 수정했습니다 !\");navigate(0);}).catch(err=>{console.log(\"[Comment.js] updateComment() error :<\");console.log(err);alert(err.response.data);});updateToggle();};/* 댓글 삭제 */const deleteComment=async()=>{await axios.delete(\"http://localhost:3000/comment/\".concat(comment.seq)).then(resp=>{console.log(\"[BbsComment.js] deleteComment() success :D\");console.log(resp.data);if(resp.data.deletedRecordCount==1){alert(\"답글을 성공적으로 삭제했습니다 :D\");navigate(0);}}).catch(err=>{console.log(\"[BbsComment.js] deleteComment() error :<\");console.log(err);});};function updateToggle(){setShow(show=>!show);}// 삭제되지 않은 댓글의 경우\nif(comment.del==0){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-1 d-flex justify-content-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/profile-placeholder.png\",alt:\"\\uD504\\uB85C\\uD544 \\uC774\\uBBF8\\uC9C0\",className:\"profile-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"span\",{className:\"comment-id\",children:comment.id})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"span\",{children:comment.createdAt})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 d-flex justify-content-end\",children:/* 자신이 작성한 댓글인 경우에만 수정 삭제 가능 */localStorage.getItem(\"id\")==comment.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary\",onClick:updateToggle,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\" \\uC218\\uC815\"]}),\" \\xA0\",/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-danger\",onClick:deleteComment,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"}),\" \\uC0AD\\uC81C\"]})]}):null})]}),/* 댓글 수정하는 경우 */show?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"my-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"col-10\",rows:\"5\",value:content,onChange:changeContent})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-1 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-dark\",onClick:updateComment,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\"  \\uC218\\uC815 \\uC644\\uB8CC\"]})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"my-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 comment\",children:content})})})]});}// 삭제된 댓글의 경우\nelse{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"my-5 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"comment\",children:/*#__PURE__*/_jsx(\"span\",{className:\"del-span\",children:\"\\u26A0\\uFE0F \\uC791\\uC131\\uC790\\uC5D0 \\uC758\\uD574 \\uC0AD\\uC81C\\uB41C \\uB313\\uAE00\\uC785\\uB2C8\\uB2E4.\"})})})});}}export default Comment;","map":{"version":3,"names":["axios","useContext","useState","useNavigate","AuthContext","HttpHeadersContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Comment","props","auth","setAuth","headers","setHeaders","comment","obj","navigate","show","setShow","content","setContent","changeContent","event","target","value","updateComment","req","patch","concat","seq","then","resp","console","log","data","alert","catch","err","response","updateToggle","deleteComment","delete","deletedRecordCount","del","children","className","src","alt","id","createdAt","localStorage","getItem","onClick","rows","onChange"],"sources":["C:/.git/frontend-bbs/src/Components/comment/Comment.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useContext, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { AuthContext } from \"../context/AuthProvider\";\r\nimport { HttpHeadersContext } from \"../context/HttpHeadersProvider\";\r\n\r\n\r\n/* 댓글 컴포넌트 */\r\nfunction Comment(props) {\r\n\tconst {auth, setAuth} = useContext(AuthContext);\r\n\tconst {headers, setHeaders} = useContext(HttpHeadersContext);\r\n\tconst comment = props.obj;\r\n\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst [show, setShow] = useState(false);\r\n\r\n\tconst [content, setContent] = useState(comment.content);\r\n\tconst changeContent = (event) => {\r\n\t\tsetContent(event.target.value);\r\n\t};\r\n\r\n\t/* 댓글 수정 */\r\n\tconst updateComment = async () => {\r\n\r\n\t\tconst req = {\r\n\t\t\tcontent: content\r\n\t\t};\r\n\r\n\t\tawait axios.patch(`http://localhost:3000/comment/${comment.seq}`, req, {headers: headers})\r\n\t\t.then((resp) => {\r\n\t\t\t\r\n\t\t\tconsole.log(\"[Comment.js] updateComment() success :D\");\r\n\t\t\tconsole.log(resp.data);\r\n\r\n\t\t\talert(\"댓글을 성공적으로 수정했습니다 !\");\r\n\t\t\tnavigate(0);\r\n\r\n\t\t}).catch((err) => {\r\n\r\n\t\t\tconsole.log(\"[Comment.js] updateComment() error :<\");\r\n\t\t\tconsole.log(err);\r\n\r\n\t\t\talert(err.response.data);\r\n\r\n\t\t});\r\n\r\n\r\n\t\tupdateToggle();\r\n\t}\r\n\r\n\t/* 댓글 삭제 */\r\n\tconst deleteComment = async () => {\r\n\t\tawait axios.delete(`http://localhost:3000/comment/${comment.seq}`)\r\n\t\t\t.then((resp) => {\r\n\t\t\t\tconsole.log(\"[BbsComment.js] deleteComment() success :D\");\r\n\t\t\t\tconsole.log(resp.data);\r\n\r\n\t\t\t\tif (resp.data.deletedRecordCount == 1) {\r\n\t\t\t\t\talert(\"답글을 성공적으로 삭제했습니다 :D\");\r\n\t\t\t\t\tnavigate(0);\r\n\t\t\t\t}\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tconsole.log(\"[BbsComment.js] deleteComment() error :<\");\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction updateToggle() { \r\n\t\tsetShow(show => !show) \r\n\t}\r\n\r\n\t// 삭제되지 않은 댓글의 경우\r\n\tif (comment.del == 0) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{/* 상단 영역 (프로필 이미지, 댓글 작성자, 댓글 작성시간) */}\r\n\t\t\t\t<div className=\"my-1 d-flex justify-content-center\">\r\n\t\t\t\t\t<div className=\"col-1\">\r\n\t\t\t\t\t\t<img src=\"/images/profile-placeholder.png\" alt=\"프로필 이미지\"\r\n\t\t\t\t\t\t\tclassName=\"profile-img\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-5\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<span className=\"comment-id\">{comment.id}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<span>{comment.createdAt}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"col-4 d-flex justify-content-end\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t/* 자신이 작성한 댓글인 경우에만 수정 삭제 가능 */\r\n\t\t\t\t\t\t(localStorage.getItem(\"id\") == comment.id) ?\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-outline-secondary\" onClick={updateToggle}><i className=\"fas fa-edit\"></i> 수정</button> &nbsp; \r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-outline-danger\" onClick={deleteComment}><i className=\"fas fa-trash-alt\"></i> 삭제</button>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t/* 댓글 수정하는 경우 */\r\n\t\t\t\t\tshow ?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{/* 하단 영역 (댓글 내용 + 댓글 내용 편집 창) */}\r\n\t\t\t\t\t\t\t<div className=\"my-3 d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t\t<textarea className=\"col-10\" rows=\"5\" value={content} onChange={changeContent}></textarea>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"my-1 d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-dark\" onClick={updateComment}><i className=\"fas fa-edit\"></i>  수정 완료</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{/* 하단 영역 (댓글 내용) */}\r\n\t\t\t\t\t\t\t<div className=\"my-3 d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t\t<div className=\"col-10 comment\">{content}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\t// 삭제된 댓글의 경우\r\n\telse {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"my-5 d-flex justify-content-center\">\r\n\t\t\t\t\t<div className=\"comment\">\r\n\t\t\t\t\t\t<span className=\"del-span\">⚠️ 작성자에 의해 삭제된 댓글입니다.</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}