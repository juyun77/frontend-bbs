{"ast":null,"code":"import axios from\"axios\";import{useLocation,useNavigate}from\"react-router-dom\";import{useContext,useState}from\"react\";import{AuthContext}from\"../context/AuthProvider\";import{HttpHeadersContext}from\"../context/HttpHeadersProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BbsUpdate(){const{headers,setHeaders}=useContext(HttpHeadersContext);const{auth,setAuth}=useContext(AuthContext);const navigate=useNavigate();const location=useLocation();const{bbs}=location.state;const[title,setTitle]=useState(bbs.title);const[content,setContent]=useState(bbs.content);const changeTitle=event=>{setTitle(event.target.value);};const changeContent=event=>{setContent(event.target.value);};const updateBbs=async()=>{const req={id:auth,title:title,content:content};await axios.patch(\"http://api.juyun.link/bbs/\".concat(bbs.seq),req,{headers:headers}).then(resp=>{console.log(\"[BbsUpdate.js] updateBbs() success :D\");console.log(resp.data);if(resp.data.updatedRecordCount==1){alert(\"게시글을 성공적으로 수정했습니다 :D\");navigate(\"/bbsdetail/\".concat(bbs.seq));// 글 상세로 이동\n}}).catch(err=>{console.log(\"[BbsUpdate.js] updateBbs() error :<\");console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-primary\",children:\"\\uC791\\uC131\\uC790\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:bbs.id,size:\"50px\",readOnly:true})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-primary\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:title,onChange:changeTitle,size:\"50px\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-primary\",children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:content,onChange:changeContent,rows:\"10\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-dark\",onClick:updateBbs,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-pen\"}),\" \\uC218\\uC815\\uD558\\uAE30\"]})})]});}export default BbsUpdate;","map":{"version":3,"names":["axios","useLocation","useNavigate","useContext","useState","AuthContext","HttpHeadersContext","jsx","_jsx","jsxs","_jsxs","BbsUpdate","headers","setHeaders","auth","setAuth","navigate","location","bbs","state","title","setTitle","content","setContent","changeTitle","event","target","value","changeContent","updateBbs","req","id","patch","concat","seq","then","resp","console","log","data","updatedRecordCount","alert","catch","err","children","className","type","size","readOnly","onChange","rows","onClick"],"sources":["C:/.git/frontend-bbs/src/Components/bbs/BbsUpdate.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { useContext, useState } from \"react\";\r\nimport { AuthContext } from \"../context/AuthProvider\";\r\nimport { HttpHeadersContext } from \"../context/HttpHeadersProvider\";\r\n\r\nfunction BbsUpdate() {\r\n\r\n\tconst { headers, setHeaders } = useContext(HttpHeadersContext);\r\n\tconst { auth, setAuth } = useContext(AuthContext);\r\n\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst location = useLocation();\r\n\tconst { bbs } = location.state;\r\n\t\r\n\tconst [title, setTitle] = useState(bbs.title);\r\n\tconst [content, setContent] = useState(bbs.content);\r\n\r\n\tconst changeTitle = (event) => {\r\n\t\tsetTitle(event.target.value);\r\n\t}\r\n\r\n\tconst changeContent = (event) => {\r\n\t\tsetContent(event.target.value);\r\n\t}\r\n\r\n\tconst updateBbs = async () => {\r\n\r\n\t\tconst req = {\r\n\t\t\tid: auth, \r\n\t\t\ttitle: title, \r\n\t\t\tcontent: content\r\n\t\t}\r\n\r\n\t\tawait axios.patch(`http://api.juyun.link/bbs/${bbs.seq}`, req, {headers: headers})\r\n\t\t.then((resp) => {\r\n\t\t\tconsole.log(\"[BbsUpdate.js] updateBbs() success :D\");\r\n\t\t\tconsole.log(resp.data);\r\n\r\n\t\t\tif (resp.data.updatedRecordCount == 1) {\r\n\t\t\t\talert(\"게시글을 성공적으로 수정했습니다 :D\");\r\n\t\t\t\tnavigate(`/bbsdetail/${bbs.seq}`); // 글 상세로 이동\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(\"[BbsUpdate.js] updateBbs() error :<\");\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<table className=\"table\">\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th className=\"table-primary\">작성자</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control\"  value={bbs.id} size=\"50px\" readOnly />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th className=\"table-primary\">제목</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control\" value={title} onChange={changeTitle} size=\"50px\" />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th className=\"table-primary\">내용</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<textarea className=\"form-control\" value={content} onChange={changeContent} rows=\"10\" ></textarea>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\r\n\t\t\t<div className=\"my-3 d-flex justify-content-center\">\r\n\t\t\t\t<button className=\"btn btn-dark\" onClick={updateBbs}><i className=\"fas fa-pen\"></i> 수정하기</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nexport default BbsUpdate;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}